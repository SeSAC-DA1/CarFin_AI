# ì±—ë´‡ ê¸°ë°˜ ë…¼ë¬¸ êµ¬í˜„ ìƒì„¸ ê°€ì´ë“œ

## ğŸ¤” í•µì‹¬ ì§ˆë¬¸: ì±—ë´‡ì—ì„œ ì •ë§ ê°€ëŠ¥í•œê°€?

**ë‹µ: YES! í•˜ì§€ë§Œ ì „í†µì ì¸ ì¶”ì²œ ì‹œìŠ¤í…œê³¼ëŠ” ë‹¤ë¥¸ ë°©ì‹ì…ë‹ˆë‹¤.**

---

## ğŸ“Š ì „í†µì  ì¶”ì²œ ì‹œìŠ¤í…œ vs ì±—ë´‡ ì¶”ì²œ ì‹œìŠ¤í…œ

### ì „í†µì  ë°©ì‹ (Alibaba Taobao ê°™ì€ ê³³)
```
ì‚¬ìš©ì ë¡œê·¸ì¸
    â†“
ê³¼ê±° êµ¬ë§¤/í´ë¦­ ì´ë ¥ ë¡œë”© (ìˆ˜ë°± ê°œ ë°ì´í„°)
    â†“
í˜‘ì—… í•„í„°ë§ / ë”¥ëŸ¬ë‹ ëª¨ë¸
    â†“
ìˆ˜ë°± ê°œ ìƒí’ˆ ì¶”ì²œ
    â†“
Personalized Re-rankingìœ¼ë¡œ ì •ë ¬
    â†“
í™”ë©´ì— í‘œì‹œ
```
**ë¬¸ì œ**: CarFinì€ ê³¼ê±° ì´ë ¥ì´ ì—†ìŒ!

### ì±—ë´‡ ë°©ì‹ (CarFin)
```
ì‚¬ìš©ìê°€ ì±—ë´‡ì— ì…ë ¥
    â†“
ëŒ€í™”ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹ˆì¦ˆ ì¶”ì¶œ â† í•µì‹¬!
    â†“
DB ê²€ìƒ‰ìœ¼ë¡œ ì´ˆê¸° í›„ë³´ ìƒì„± (50ê°œ)
    â†“
Personalized Re-rankingìœ¼ë¡œ Top 3 ì„ íƒ
    â†“
ì±—ë´‡ ëŒ€í™”ë¡œ í‘œì‹œ
    â†“
ì‚¬ìš©ì í”¼ë“œë°± â†’ ì¦‰ì‹œ ì¬ì¶”ì²œ
```
**í•´ê²°**: ëŒ€í™”ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡œí•„ ìƒì„±!

---

## ğŸ¯ Phase 1: ëŒ€í™”ì—ì„œ UserProfile ìƒì„± (í•µì‹¬!)

### ë¬¸ì œ: Alibaba ë…¼ë¬¸ì€ "ê³¼ê±° ì´ë ¥"ì„ ì“°ëŠ”ë°, CarFinì€ ì–´ë–»ê²Œ?

**ë‹µ**: Gemini LLMì´ ëŒ€í™”ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤!

### ì‹¤ì œ êµ¬í˜„ ì˜ˆì‹œ

```typescript
// lib/ai/profile-extractor.ts

interface UserProfile {
  // Re-rankingì— í•„ìš”í•œ ê°€ì¤‘ì¹˜
  fuel_efficiency_importance: number;  // 0-1
  safety_importance: number;
  price_sensitivity: number;
  comfort_importance: number;
  brand_preference: string[];
  budget: number;

  // ì¶”ì¶œëœ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸
  purpose: string;  // "ê°€ì¡±ìš©", "ì¶œí‡´ê·¼ìš©"
  family_size: number;
  mentioned_keywords: string[];
}

async function extractUserProfileFromConversation(
  messages: Message[]
): Promise<UserProfile> {

  // Geminiì—ê²Œ ëŒ€í™” ë¶„ì„ ìš”ì²­
  const prompt = `
ë‹¤ìŒ ëŒ€í™”ì—ì„œ ì‚¬ìš©ìì˜ ì°¨ëŸ‰ ì„ í˜¸ë„ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”:

ëŒ€í™”:
${messages.map(m => `${m.role}: ${m.content}`).join('\n')}

ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
{
  "fuel_efficiency_importance": 0-1 ì‚¬ì´ ìˆ«ì,
  "safety_importance": 0-1 ì‚¬ì´ ìˆ«ì,
  "price_sensitivity": 0-1 ì‚¬ì´ ìˆ«ì,
  "comfort_importance": 0-1 ì‚¬ì´ ìˆ«ì,
  "brand_preference": ["í˜„ëŒ€", "ê¸°ì•„"],
  "budget": ìˆ«ì,
  "purpose": "ê°€ì¡±ìš©" ë˜ëŠ” "ì¶œí‡´ê·¼ìš©" ë“±,
  "family_size": ìˆ«ì,
  "mentioned_keywords": ["ì—°ë¹„", "ì•ˆì „"]
}

ë¶„ì„ ê¸°ì¤€:
- "ì—°ë¹„ ì¤‘ìš”í•´ìš”" â†’ fuel_efficiency_importance = 0.9
- "ê°€ì¡±ìš©ì´ì—ìš”" â†’ safety_importance = 0.8
- "ì˜ˆì‚°ì€ 3000ë§Œì›" â†’ budget = 30000000, price_sensitivity = 0.8
- "í¸í•œê²Œ ì¢‹ì•„ìš”" â†’ comfort_importance = 0.9
- ëª…ì‹œ ì•ˆ í•œ ê²ƒì€ ê¸°ë³¸ê°’ 0.5
`;

  const response = await gemini.generateContent(prompt);
  const profileJson = JSON.parse(response.text);

  return profileJson as UserProfile;
}
```

### ì‹¤ì œ ëŒ€í™” ì˜ˆì‹œ

```
ì‚¬ìš©ì: "ê°€ì¡±ìš© SUV ì°¾ì•„ìš”"
    â†“
Gemini ë¶„ì„:
{
  "purpose": "ê°€ì¡±ìš©",
  "safety_importance": 0.7,  // "ê°€ì¡±ìš©" â†’ ì•ˆì „ ì¤‘ìš” ì¶”ë¡ 
  "fuel_efficiency_importance": 0.5,  // ì–¸ê¸‰ ì—†ìŒ
  "price_sensitivity": 0.5,
  "comfort_importance": 0.6,  // "ê°€ì¡±ìš©" â†’ í¸ì˜ ì–´ëŠì •ë„ ì¤‘ìš”
  "budget": null,  // ì•„ì§ ëª¨ë¦„
  "family_size": null
}

ì‚¬ìš©ì: "ì˜ˆì‚°ì€ 3000ë§Œì›ì´ê³ , ì—°ë¹„ê°€ ì¤‘ìš”í•´ìš”"
    â†“
Gemini ë¶„ì„ (ì—…ë°ì´íŠ¸):
{
  "purpose": "ê°€ì¡±ìš©",
  "safety_importance": 0.7,
  "fuel_efficiency_importance": 0.9,  // â† ì—…ë°ì´íŠ¸!
  "price_sensitivity": 0.8,  // â† ì˜ˆì‚° ì–¸ê¸‰ â†’ ê°€ê²© ë¯¼ê°
  "comfort_importance": 0.6,
  "budget": 30000000,  // â† ì—…ë°ì´íŠ¸!
  "family_size": null,
  "mentioned_keywords": ["ì—°ë¹„"]
}

ì‚¬ìš©ì: "ì•„ ê·¼ë° ìƒê°í•´ë³´ë‹ˆ ê°€ê²©ë³´ë‹¤ ì•ˆì „ì´ ë” ì¤‘ìš”í•´"
    â†“
Gemini ë¶„ì„ (ì¬ì—…ë°ì´íŠ¸):
{
  "purpose": "ê°€ì¡±ìš©",
  "safety_importance": 0.95,  // â† ì—…ë°ì´íŠ¸!
  "fuel_efficiency_importance": 0.7,  // â† ì•½ê°„ ê°ì†Œ
  "price_sensitivity": 0.5,  // â† ê°ì†Œ!
  "comfort_importance": 0.6,
  "budget": 30000000,
  "family_size": null,
  "mentioned_keywords": ["ì—°ë¹„", "ì•ˆì „"]
}
```

**ì´ê²Œ ì±—ë´‡ì˜ í•µì‹¬ì…ë‹ˆë‹¤!** ê³¼ê±° ì´ë ¥ ëŒ€ì‹  **ëŒ€í™”ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡œí•„ ìƒì„±**

---

## ğŸ”„ Phase 2: Personalized Re-ranking ì‹¤í–‰

### ì±—ë´‡ì—ì„œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ê³¼ì •

```typescript
// components/chat/ChatRoom.tsx

async function handleUserMessage(userInput: string) {
  // 1. ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
  addMessage({ role: 'user', content: userInput });

  // 2. Geminiê°€ ëŒ€í™” ì˜ë„ íŒŒì•…
  const intent = await analyzeIntent(userInput, conversationHistory);

  if (intent.type === 'INITIAL_SEARCH') {
    // ì²« ê²€ìƒ‰
    await performInitialRecommendation(userInput);

  } else if (intent.type === 'MODIFY_PREFERENCES') {
    // ì¬ì¶”ì²œ (í”„ë¡œí•„ ë³€ê²½)
    await performReranking('PROFILE_CHANGE', intent.changes);

  } else if (intent.type === 'EXCLUDE_VEHICLE') {
    // ì¬ì¶”ì²œ (ì°¨ëŸ‰ ì œì™¸)
    await performReranking('EXCLUDE', intent.vehicleName);
  }
}

async function performInitialRecommendation(userInput: string) {
  // Step 1: Geminiê°€ UserProfile ì¶”ì¶œ
  showAgentActivity('needs_analyst', 'ì‚¬ìš©ì ë‹ˆì¦ˆ ë¶„ì„ ì¤‘...');

  const userProfile = await extractUserProfileFromConversation([
    ...conversationHistory,
    { role: 'user', content: userInput }
  ]);

  // Step 2: DBì—ì„œ ì´ˆê¸° í›„ë³´ ê²€ìƒ‰
  showAgentActivity('data_analyst', 'DBì—ì„œ ì°¨ëŸ‰ ê²€ìƒ‰ ì¤‘...');

  const searchCriteria = buildSearchCriteria(userProfile);
  const candidates = await db.vehicles.findMany({
    where: {
      type: searchCriteria.vehicleType,
      price: {
        gte: searchCriteria.minPrice,
        lte: searchCriteria.maxPrice
      },
      year: { gte: 2018 }
    },
    take: 50  // 50ê°œ í›„ë³´
  });

  showMessage({
    role: 'assistant',
    agent: 'data_analyst',
    content: `${candidates.length}ê°œì˜ ì°¨ëŸ‰ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`
  });

  // Step 3: Personalized Re-ranking ì‹¤í–‰
  showAgentActivity('concierge', 'ê°œì¸í™” ì¶”ì²œ ê³„ì‚° ì¤‘...');

  const rankedVehicles = await personalizedReranking(
    candidates,
    userProfile
  );

  // Step 4: TOPSISë¡œ ê° ì°¨ëŸ‰ ë¶„ì„
  showAgentActivity('data_analyst', 'ì°¨ëŸ‰ ìƒì„¸ ë¶„ì„ ì¤‘...');

  const vehiclesWithInsights = await Promise.all(
    rankedVehicles.map(async (rv) => {
      const peerGroup = await findPeerGroup(rv.vehicle);
      const insight = await calculateTOPSIS(rv.vehicle, peerGroup);
      return { ...rv, insight };
    })
  );

  // Step 5: ì±—ë´‡ì— í‘œì‹œ
  setState({
    currentRecommendations: vehiclesWithInsights,
    userProfile,
    candidates,  // ì¬ì¶”ì²œìš©ìœ¼ë¡œ ì €ì¥
  });

  showRecommendationCards(vehiclesWithInsights);

  showMessage({
    role: 'assistant',
    agent: 'concierge',
    content: 'íšŒì›ë‹˜ê»˜ ë”± ë§ëŠ” ì°¨ëŸ‰ 3ëŒ€ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤! ì–´ë– ì‹ ê°€ìš”?'
  });
}
```

### ì±—ë´‡ UIì—ì„œ ë³´ì´ëŠ” ê³¼ì •

```
[ì±—ë´‡ í™”ë©´]

ì‚¬ìš©ì: "ê°€ì¡±ìš© SUV 3000ë§Œì› ì •ë„ë¡œ ì°¾ì•„ì£¼ì„¸ìš”"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Needs Analyst
ğŸ’¬ ì‚¬ìš©ì ë‹ˆì¦ˆë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...
âœ… ë¶„ì„ ì™„ë£Œ: ê°€ì¡±ìš©, ì˜ˆì‚° 3000ë§Œì›, SUV

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Data Analyst
ğŸ’¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°ê±´ì— ë§ëŠ” ì°¨ëŸ‰ì„ ê²€ìƒ‰ ì¤‘...
âœ… 50ê°œì˜ ì°¨ëŸ‰ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Concierge
ğŸ’¬ ê°œì¸í™” ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰ ì¤‘...
   (Alibaba Re-ranking ë…¼ë¬¸ ì ìš©)
âœ… Top 3 ì¶”ì²œ ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Data Analyst
ğŸ’¬ ê° ì°¨ëŸ‰ì˜ ìƒì„¸ ë¶„ì„ ì¤‘...
   (AHP-TOPSIS ë…¼ë¬¸ ì ìš©)
âœ… ì¢…í•© ë¶„ì„ ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Concierge
íšŒì›ë‹˜ê»˜ ë”± ë§ëŠ” ì°¨ëŸ‰ 3ëŒ€ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤!

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥‡ 1ìœ„ ì¶”ì²œ - íŒ°ë¦¬ì„¸ì´ë“œ              â”‚
â”‚                                          â”‚
â”‚ ğŸ’° 2,800ë§Œì› | ğŸ“… 2021ë…„ | ğŸ›£ï¸ 4.5ë§Œkm â”‚
â”‚ â›½ 10.2km/L | âœ… ë¬´ì‚¬ê³                  â”‚
â”‚                                          â”‚
â”‚ ğŸ¤– AI ì¶”ì²œ ì´ìœ :                        â”‚
â”‚ "ê°€ì¡±ìš©ìœ¼ë¡œ ì•ˆì „ì„±ì´ ë›°ì–´ë‚˜ê³ ,          â”‚
â”‚  ì˜ˆì‚° ë²”ìœ„ ë‚´ì—ì„œ ê°€ì¥ ê²½ì œì ì…ë‹ˆë‹¤"    â”‚
â”‚                                          â”‚
â”‚ ğŸ“Š Quick Stats:                         â”‚
â”‚ â–ª ì¢…í•© ì ìˆ˜: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 87ì            â”‚
â”‚ â–ª ê°€ê²© ê²½ìŸë ¥: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 92ì          â”‚
â”‚ â–ª ì£¼í–‰ê±°ë¦¬: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 78ì             â”‚
â”‚                                          â”‚
â”‚ [ğŸ“Š ìƒì„¸ ë¶„ì„ ë³´ê¸°] [âŒ ì´ ì°¨ëŸ‰ ì œì™¸]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ˆ 2ìœ„ ì¶”ì²œ - ì˜ë Œí†                   â”‚
â”‚ [ë™ì¼í•œ êµ¬ì¡°]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥‰ 3ìœ„ ì¶”ì²œ - ì‹¼íƒ€í˜                  â”‚
â”‚ [ë™ì¼í•œ êµ¬ì¡°]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ ì¤‘ì—ì„œ ë§ˆìŒì— ë“œëŠ” ì°¨ëŸ‰ì´ ìˆìœ¼ì‹ ê°€ìš”?
```

---

## ğŸ”„ Phase 3: ì¬ì¶”ì²œ ì‹œìŠ¤í…œ (ì§„ì§œ í•µì‹¬!)

### Case 1: ì‚¬ìš©ìê°€ ì¡°ê±´ ë³€ê²½

```typescript
// ì‚¬ìš©ì ì…ë ¥
ì‚¬ìš©ì: "ê°€ê²©ë³´ë‹¤ ì•ˆì „ì´ ë” ì¤‘ìš”í•´ìš”"

// ì±—ë´‡ ë‚´ë¶€ ì²˜ë¦¬
async function performReranking(type: 'PROFILE_CHANGE', changes: any) {

  showMessage({
    role: 'assistant',
    agent: 'needs_analyst',
    content: 'ì•Œê² ìŠµë‹ˆë‹¤! ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ ë‹¤ì‹œ ì°¾ì•„ë³´ê² ìŠµë‹ˆë‹¤.'
  });

  showAgentActivity('needs_analyst', 'ì„ í˜¸ë„ ì—…ë°ì´íŠ¸ ì¤‘...');

  // Step 1: UserProfile ì—…ë°ì´íŠ¸
  const updatedProfile = {
    ...currentUserProfile,
    safety_importance: 0.95,  // â†‘ ì¦ê°€
    price_sensitivity: 0.5,   // â†“ ê°ì†Œ
  };

  // Step 2: ê¸°ì¡´ 50ê°œ í›„ë³´ë¡œ ì¬ê³„ì‚° (DB ì¬ê²€ìƒ‰ ë¶ˆí•„ìš”!)
  showAgentActivity('concierge', 'ì¬ì¶”ì²œ ê³„ì‚° ì¤‘...');

  const newRanking = await personalizedReranking(
    currentCandidates,  // ê¸°ì¡´ 50ê°œ ì¬ì‚¬ìš©
    updatedProfile      // ì—…ë°ì´íŠ¸ëœ í”„ë¡œí•„
  );

  // Step 3: ìƒˆë¡œìš´ Top 3ì— ëŒ€í•´ TOPSIS ì¬ê³„ì‚°
  const newInsights = await Promise.all(
    newRanking.map(async (rv) => {
      const peerGroup = await findPeerGroup(rv.vehicle);
      const insight = await calculateTOPSIS(rv.vehicle, peerGroup);
      return { ...rv, insight };
    })
  );

  // Step 4: UI ì—…ë°ì´íŠ¸
  setState({
    currentRecommendations: newInsights,
    userProfile: updatedProfile
  });

  showRecommendationCards(newInsights);

  showMessage({
    role: 'assistant',
    agent: 'concierge',
    content: 'ì•ˆì „ ì‚¬ì–‘ì´ ìš°ìˆ˜í•œ ì°¨ëŸ‰ìœ¼ë¡œ ë‹¤ì‹œ ì¶”ì²œë“œë ¸ìŠµë‹ˆë‹¤!'
  });
}
```

### ì±—ë´‡ UIì—ì„œ ë³´ì´ëŠ” ê³¼ì •

```
[ì±—ë´‡ í™”ë©´]

ì‚¬ìš©ì: "ê°€ê²©ë³´ë‹¤ ì•ˆì „ì´ ë” ì¤‘ìš”í•´ìš”"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Needs Analyst
ğŸ’¬ ì•Œê² ìŠµë‹ˆë‹¤! ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ ë‹¤ì‹œ ì°¾ì•„ë³´ê² ìŠµë‹ˆë‹¤.
ğŸ”„ ì„ í˜¸ë„ ì—…ë°ì´íŠ¸ ì¤‘...
âœ… ì—…ë°ì´íŠ¸ ì™„ë£Œ
   - ì•ˆì „ ì¤‘ìš”ë„: 70% â†’ 95%
   - ê°€ê²© ë¯¼ê°ë„: 80% â†’ 50%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Concierge
ğŸ’¬ ì—…ë°ì´íŠ¸ëœ ì„ í˜¸ë„ë¡œ ì¬ì¶”ì²œ ê³„ì‚° ì¤‘...
   (Re-ranking ì•Œê³ ë¦¬ì¦˜ ì¬ì‹¤í–‰)
âœ… ì¬ê³„ì‚° ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Data Analyst
ğŸ’¬ ìƒˆë¡œìš´ ì¶”ì²œ ì°¨ëŸ‰ ë¶„ì„ ì¤‘...
âœ… ë¶„ì„ ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Concierge
ì•ˆì „ ì‚¬ì–‘ì´ ìš°ìˆ˜í•œ ì°¨ëŸ‰ìœ¼ë¡œ ë‹¤ì‹œ ì¶”ì²œë“œë ¸ìŠµë‹ˆë‹¤!

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥‡ 1ìœ„ ì¶”ì²œ - GV80 (ë³€ê²½ë¨!)          â”‚
â”‚                                          â”‚
â”‚ ğŸ’° 3,200ë§Œì› | ğŸ“… 2022ë…„ | ğŸ›£ï¸ 3.2ë§Œkm â”‚
â”‚ â›½ 9.8km/L | âœ… ë¬´ì‚¬ê³                   â”‚
â”‚                                          â”‚
â”‚ ğŸ¤– AI ì¶”ì²œ ì´ìœ :                        â”‚
â”‚ "ìµœê³  ë“±ê¸‰ ì•ˆì „ ì‚¬ì–‘ê³¼ ì²¨ë‹¨ ìš´ì „ì     â”‚
â”‚  ë³´ì¡° ì‹œìŠ¤í…œì´ ê°€ì¡± ë³´í˜¸ì— ìµœì ì…ë‹ˆë‹¤" â”‚
â”‚                                          â”‚
â”‚ ğŸ›¡ï¸ ì•ˆì „ ì‚¬ì–‘ (ì—…ê·¸ë ˆì´ë“œ):             â”‚
â”‚ â–ª ì „ë°© ì¶©ëŒë°©ì§€ ë³´ì¡° (FCA)             â”‚
â”‚ â–ª í›„ì¸¡ë°© ì¶©ëŒë°©ì§€ ë³´ì¡° (BCA)           â”‚
â”‚ â–ª ì°¨ë¡œ ì´íƒˆë°©ì§€ ë³´ì¡° (LKA)             â”‚
â”‚ â–ª ìš´ì „ì ì£¼ì˜ ê²½ê³  (DAW)               â”‚
â”‚                                          â”‚
â”‚ ğŸ“Š Quick Stats:                         â”‚
â”‚ â–ª ì¢…í•© ì ìˆ˜: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 92ì            â”‚
â”‚ â–ª ì•ˆì „ ì ìˆ˜: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 98ì  â† NEW!   â”‚
â”‚ â–ª ê°€ê²© ê²½ìŸë ¥: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 75ì          â”‚
â”‚                                          â”‚
â”‚ [ğŸ“Š ìƒì„¸ ë¶„ì„ ë³´ê¸°] [âŒ ì´ ì°¨ëŸ‰ ì œì™¸]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ˆ 2ìœ„ ì¶”ì²œ - íŒ°ë¦¬ì„¸ì´ë“œ (ìœ ì§€)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥‰ 3ìœ„ ì¶”ì²œ - QM6 (ë³€ê²½ë¨!)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì´ì œ ì•ˆì „ ì¤‘ì‹¬ìœ¼ë¡œ ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë– ì‹ ê°€ìš”?
```

**í•µì‹¬**: DB ì¬ê²€ìƒ‰ ì—†ì´ **ê¸°ì¡´ 50ê°œ í›„ë³´**ë¡œ ì¦‰ì‹œ ì¬ê³„ì‚°!

---

### Case 2: íŠ¹ì • ì°¨ëŸ‰ ì œì™¸

```typescript
ì‚¬ìš©ì: "íŒ°ë¦¬ì„¸ì´ë“œëŠ” ë¹¼ê³  ë‹¤ë¥¸ ê±° ë³´ì—¬ì¤˜"

// ì±—ë´‡ ì²˜ë¦¬
async function excludeVehicleAndRerank(vehicleName: string) {

  showMessage({
    role: 'assistant',
    agent: 'concierge',
    content: `ì•Œê² ìŠµë‹ˆë‹¤. ${vehicleName}ë¥¼ ì œì™¸í•˜ê³  ë‹¤ì‹œ ì¶”ì²œë“œë¦¬ê² ìŠµë‹ˆë‹¤.`
  });

  // Step 1: ì œì™¸ ëª©ë¡ ì¶”ê°€
  const excludedVehicles = [...state.excludedVehicles, vehicleName];

  // Step 2: í•„í„°ë§
  const filteredCandidates = state.candidates.filter(
    v => !excludedVehicles.includes(v.name)
  );

  showMessage({
    role: 'assistant',
    agent: 'data_analyst',
    content: `${filteredCandidates.length}ê°œ ì°¨ëŸ‰ìœ¼ë¡œ ì¬ê³„ì‚°í•©ë‹ˆë‹¤.`
  });

  // Step 3: Re-ranking
  const newRanking = await personalizedReranking(
    filteredCandidates,
    state.userProfile
  );

  // Step 4: UI ì—…ë°ì´íŠ¸
  showRecommendationCards(newRanking);
}
```

### ì±—ë´‡ UI

```
ì‚¬ìš©ì: "íŒ°ë¦¬ì„¸ì´ë“œëŠ” ë¹¼ê³  ë‹¤ë¥¸ ê±° ë³´ì—¬ì¤˜"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Concierge
ì•Œê² ìŠµë‹ˆë‹¤. íŒ°ë¦¬ì„¸ì´ë“œë¥¼ ì œì™¸í•˜ê³  ë‹¤ì‹œ ì¶”ì²œë“œë¦¬ê² ìŠµë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– Data Analyst
49ê°œ ì°¨ëŸ‰ìœ¼ë¡œ ì¬ê³„ì‚°í•©ë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥‡ 1ìœ„ ì¶”ì²œ - ì˜ë Œí†  (2ìœ„â†’1ìœ„ ìŠ¹ê²©) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ˆ 2ìœ„ ì¶”ì²œ - ì‹¼íƒ€í˜ (3ìœ„â†’2ìœ„ ìŠ¹ê²©) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥‰ 3ìœ„ ì¶”ì²œ - ëª¨í•˜ë¹„ (ìƒˆë¡œ ì§„ì…!)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Phase 4: ìƒì„¸ ë¶„ì„ ë³´ê¸° (TOPSIS)

```typescript
// ì‚¬ìš©ìê°€ "ìƒì„¸ ë¶„ì„ ë³´ê¸°" ë²„íŠ¼ í´ë¦­

function openVehicleInsightDashboard(vehicle: Vehicle) {
  // ì´ë¯¸ ê³„ì‚°ëœ TOPSIS ê²°ê³¼ í‘œì‹œ
  const insight = vehicle.insight;

  showModal(
    <VehicleInsightDashboard
      vehicle={vehicle}
      insight={insight}
    />
  );
}
```

### Dashboard Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ íŒ°ë¦¬ì„¸ì´ë“œ ì¢…í•© ë¶„ì„                                         â”‚
â”‚                                                               â”‚
â”‚ [ì¢…í•© ë¶„ì„] [ì˜µì…˜ ë¶„ì„] [TCO ë¶„ì„]                           â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì¢…í•© ì ìˆ˜                                               â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚        87ì                                              â”‚ â”‚
â”‚ â”‚    â•±â”€â”€â”€â”€â”€â”€â”€â”€â•²                                          â”‚ â”‚
â”‚ â”‚   â”‚   87   â”‚  ë™ê¸‰ 18ê°œ ì¤‘ 2ìœ„                         â”‚ â”‚
â”‚ â”‚    â•²â”€â”€â”€â”€â”€â”€â”€â”€â•±   ìƒìœ„ 11%                              â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ í•­ëª©ë³„ ê²½ìŸë ¥ (TOPSIS ê¸°ë°˜)                                  â”‚
â”‚                                                               â”‚
â”‚ ğŸ’° ê°€ê²© ê²½ìŸë ¥         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 92ì                        â”‚
â”‚    ë™ê¸‰ ëŒ€ë¹„ 8% ì €ë ´                                         â”‚
â”‚                                                               â”‚
â”‚ ğŸ›£ï¸ ì£¼í–‰ê±°ë¦¬ ê²½ìŸë ¥    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 78ì                        â”‚
â”‚    45,000km (í‰ê· : 42,000km)                                 â”‚
â”‚                                                               â”‚
â”‚ ğŸ“… ì—°ì‹ ê²½ìŸë ¥         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 95ì                        â”‚
â”‚    2021ë…„ì‹ (ë™ê¸‰ í‰ê· : 2019ë…„)                              â”‚
â”‚                                                               â”‚
â”‚ â›½ ì—°ë¹„ ì ìˆ˜           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85ì                        â”‚
â”‚    10.2km/L (í‰ê· ë³´ë‹¤ 12% ìš°ìˆ˜)                              â”‚
â”‚                                                               â”‚
â”‚ ğŸš— ì‚¬ê³  ì´ë ¥          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100ì                        â”‚
â”‚    ë¬´ì‚¬ê³  ì°¨ëŸ‰                                               â”‚
â”‚                                                               â”‚
â”‚ âš™ï¸ ì˜µì…˜ ê²½ìŸë ¥        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 70ì                        â”‚
â”‚    8ê°œ ì˜µì…˜ (í‰ê· : 10ê°œ)                                     â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… ê°•ì  (TOPSIS ìë™ ì¶”ì¶œ)                              â”‚ â”‚
â”‚ â”‚ â€¢ ê°€ê²©ì´ ë™ê¸‰ ëŒ€ë¹„ 8% ì €ë ´í•©ë‹ˆë‹¤                        â”‚ â”‚
â”‚ â”‚ â€¢ ë¬´ì‚¬ê³  ì°¨ëŸ‰ì…ë‹ˆë‹¤                                     â”‚ â”‚
â”‚ â”‚ â€¢ ì—°ë¹„ê°€ ë™ê¸‰ í‰ê· ë³´ë‹¤ 12% ìš°ìˆ˜í•©ë‹ˆë‹¤                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âš ï¸ ì•½ì  (TOPSIS ìë™ ì¶”ì¶œ)                             â”‚ â”‚
â”‚ â”‚ â€¢ ì˜µì…˜ êµ¬ì„±ì´ í‰ê·  ì´í•˜ì…ë‹ˆë‹¤                           â”‚ â”‚
â”‚ â”‚ â€¢ ì£¼í–‰ê±°ë¦¬ê°€ ë™ê¸‰ í‰ê· ë³´ë‹¤ 5% ë§ìŠµë‹ˆë‹¤                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚ ë™ê¸‰ ì°¨ëŸ‰ ë¹„êµ (Radar Chart)                                 â”‚
â”‚                                                               â”‚
â”‚            ì—°ë¹„                                               â”‚
â”‚              â–²                                               â”‚
â”‚             â•±â”‚â•²                                              â”‚
â”‚   ì˜µì…˜ â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€ ê°€ê²©                                      â”‚
â”‚            â”‚                                                  â”‚
â”‚   ì£¼í–‰ê±°ë¦¬ â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€ ì—°ì‹                                  â”‚
â”‚                                                               â”‚
â”‚   â”â” íŒ°ë¦¬ì„¸ì´ë“œ  ---- ë™ê¸‰ í‰ê·                               â”‚
â”‚                                                               â”‚
â”‚ [ë‹«ê¸°]                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ í•µì‹¬ í¬ì¸íŠ¸ ì •ë¦¬

### 1. ì±—ë´‡ì—ì„œ ê°€ëŠ¥í•œ ì´ìœ 

**ì „í†µì  ì¶”ì²œ ì‹œìŠ¤í…œì˜ "ê³¼ê±° ì´ë ¥" ë¬¸ì œ í•´ê²°**:
```
âŒ ê³¼ê±° ì´ë ¥ ì—†ìŒ
    â†“
âœ… Geminiê°€ ëŒ€í™”ì—ì„œ ì‹¤ì‹œê°„ ì¶”ì¶œ
    - "ì—°ë¹„ ì¤‘ìš”í•´ìš”" â†’ fuel_efficiency_importance = 0.9
    - "ê°€ì¡±ìš©ì´ì—ìš”" â†’ safety_importance = 0.8
    - "ì˜ˆì‚° 3000ë§Œì›" â†’ budget = 30000000
```

### 2. ë…¼ë¬¸ ì•Œê³ ë¦¬ì¦˜ ì ìš©

**Personalized Re-ranking (Alibaba)**:
```javascript
// ì‹¤ì œ êµ¬í˜„ ì½”ë“œ
function calculateRerankingScore(vehicle, userProfile) {
  const features = extractFeatures(vehicle);

  return (
    features.fuel_efficiency * userProfile.fuel_efficiency_importance +
    features.safety * userProfile.safety_importance +
    features.price * userProfile.price_sensitivity +
    // ... ë‚˜ë¨¸ì§€
  );
}

// 50ê°œ ì°¨ëŸ‰ì— ëŒ€í•´ ì‹¤í–‰ â†’ ì ìˆ˜ ìˆœ ì •ë ¬ â†’ Top 3
```

**AHP-TOPSIS (ìë™ì°¨ ì‚°ì—… í‘œì¤€)**:
```javascript
// ì‹¤ì œ êµ¬í˜„ ì½”ë“œ
function calculateTOPSIS(vehicle, peerGroup) {
  // 1. ì •ê·œí™”
  const normalized = normalize(peerGroup);

  // 2. ê°€ì¤‘ì¹˜ ì ìš©
  const weighted = applyWeights(normalized);

  // 3. Ideal Solutions
  const idealPositive = calculateIdealPositive(weighted);
  const idealNegative = calculateIdealNegative(weighted);

  // 4. ê±°ë¦¬ ê³„ì‚°
  const distPos = distance(vehicle, idealPositive);
  const distNeg = distance(vehicle, idealNegative);

  // 5. TOPSIS Score
  return (distNeg / (distPos + distNeg)) * 100;
}
```

### 3. ì¬ì¶”ì²œì´ ë¹ ë¥¸ ì´ìœ 

```
ì´ˆê¸° ê²€ìƒ‰: DBì—ì„œ 50ê°œ â†’ ì €ì¥
    â†“
ì¬ì¶”ì²œ: ì €ì¥ëœ 50ê°œ ì¬ì‚¬ìš© â†’ DB ì¬ê²€ìƒ‰ ë¶ˆí•„ìš”!
    â†“
Re-rankingë§Œ ì¬ì‹¤í–‰ (0.5ì´ˆ ì´ë‚´)
    â†“
ì¦‰ì‹œ ìƒˆë¡œìš´ Top 3 í‘œì‹œ
```

### 4. ë¬´í•œ ì¬ì¶”ì²œ ê°€ëŠ¥

```
ì‚¬ìš©ì: "ê°€ê²©ë³´ë‹¤ ì•ˆì „ì´ ì¤‘ìš”í•´" â†’ ì¬ì¶”ì²œ 1
ì‚¬ìš©ì: "íŒ°ë¦¬ì„¸ì´ë“œ ë¹¼ê³ " â†’ ì¬ì¶”ì²œ 2
ì‚¬ìš©ì: "ì£¼í–‰ê±°ë¦¬ 5ë§Œkm ì´í•˜ë§Œ" â†’ ì¬ì¶”ì²œ 3
ì‚¬ìš©ì: "ì—°ë¹„ë„ ì¢€ ë´ì¤˜" â†’ ì¬ì¶”ì²œ 4
...
ë§Œì¡±í•  ë•Œê¹Œì§€ ê³„ì†!
```

---

## ğŸ› ï¸ ê¸°ìˆ ì  êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Frontend (ì±—ë´‡ UI)
- [ ] ChatRoom ì»´í¬ë„ŒíŠ¸ì— ì¬ì¶”ì²œ íŠ¸ë¦¬ê±° ì¶”ê°€
- [ ] VehicleRecommendationCardì— reranking_score í‘œì‹œ
- [ ] VehicleInsightDashboard Modal (TOPSIS ê²°ê³¼)
- [ ] A2A Visualization (ì—ì´ì „íŠ¸ í™œë™ í‘œì‹œ)
- [ ] ì¬ì¶”ì²œ ë¡œë”© ì• ë‹ˆë©”ì´ì…˜

### Backend (ì•Œê³ ë¦¬ì¦˜)
- [ ] `extractUserProfileFromConversation()` - Gemini í”„ë¡œí•„ ì¶”ì¶œ
- [ ] `personalizedReranking()` - Re-ranking ì•Œê³ ë¦¬ì¦˜
- [ ] `calculateTOPSIS()` - TOPSIS ì ìˆ˜ ê³„ì‚°
- [ ] `findPeerGroup()` - ë™ê¸‰ ì°¨ëŸ‰ ê²€ìƒ‰
- [ ] `detectIntent()` - ì¬ì¶”ì²œ ì˜ë„ ê°ì§€

### Database
- [ ] 50ê°œ í›„ë³´ ìºì‹± (Redis?)
- [ ] Peer group ì¸ë±ì‹± (ë¹ ë¥¸ ì¡°íšŒ)

---

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ë³‘ë ¬ ì²˜ë¦¬
```typescript
// Top 3ì— ëŒ€í•´ TOPSIS ë³‘ë ¬ ì‹¤í–‰
const insights = await Promise.all(
  top3.map(vehicle => calculateTOPSIS(vehicle, peerGroup))
);
// 3ê°œ ìˆœì°¨: 3ì´ˆ â†’ ë³‘ë ¬: 1ì´ˆ
```

### ìºì‹±
```typescript
// Peer group ìºì‹± (ìì£¼ ê²€ìƒ‰ë¨)
const cacheKey = `peer:${vehicle.type}:${priceRange}`;
const cached = await redis.get(cacheKey);
if (cached) return JSON.parse(cached);
```

### ì ì§„ì  ë¡œë”©
```typescript
// 1. ë¨¼ì € Top 3 ì¹´ë“œë§Œ í‘œì‹œ (reranking_score)
showRecommendationCards(top3);

// 2. ë°±ê·¸ë¼ìš´ë“œì—ì„œ TOPSIS ê³„ì‚°
calculateInsightsInBackground(top3);

// 3. ê³„ì‚° ì™„ë£Œë˜ë©´ "ìƒì„¸ ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ" ë±ƒì§€ í‘œì‹œ
```

---

## ê²°ë¡ 

**YES! ì±—ë´‡ì—ì„œ 100% êµ¬í˜„ ê°€ëŠ¥í•©ë‹ˆë‹¤!**

í•µì‹¬ì€:
1. **ëŒ€í™”ì—ì„œ ì‹¤ì‹œê°„ í”„ë¡œí•„ ì¶”ì¶œ** (Geminiì˜ ê°•ì  í™œìš©)
2. **50ê°œ í›„ë³´ ì €ì¥** (ì¬ì¶”ì²œ ì‹œ ì¬ì‚¬ìš©)
3. **Re-ranking ë¹ ë¥¸ ì¬ê³„ì‚°** (DB ì¬ê²€ìƒ‰ ë¶ˆí•„ìš”)
4. **TOPSISë¡œ íˆ¬ëª…í•œ ì ìˆ˜** (ì‚¬ìš©ì ì‹ ë¢° í™•ë³´)

ì´ ë°©ì‹ìœ¼ë¡œ **Alibaba ìˆ˜ì¤€ì˜ ì¶”ì²œ ì‹œìŠ¤í…œ**ì„ **ì¤‘ê³ ì°¨ ì±—ë´‡**ì— êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
